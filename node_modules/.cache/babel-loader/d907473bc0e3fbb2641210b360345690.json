{"ast":null,"code":"import _objectSpread from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _defineProperty from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/HP/Desktop/My Files/frontend files/beach-resort/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import items from'./data';import Client from'./Contentful';import{jsx as _jsx}from\"react/jsx-runtime\";var RoomContext=/*#__PURE__*/React.createContext();// <RoomContext.Provider value={}\nvar RoomProvider=/*#__PURE__*/function(_Component){_inherits(RoomProvider,_Component);var _super=_createSuper(RoomProvider);function RoomProvider(){var _this;_classCallCheck(this,RoomProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={rooms:[],sortedRooms:[],featuredRooms:[],loading:true,type:'all',capacity:1,price:0,minPrice:0,maxPrice:0,minSize:0,maxSize:0,pets:false,breakfast:false};_this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,rooms,featuredRooms,maxPrice,maxSize;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Client.getEntries({content_type:\"beachResort\"});case 3:response=_context.sent;rooms=_this.formatData(response.items);//sorting rooms by featured state then adding this rooms to featuredRooms which was empty array\nfeaturedRooms=rooms.filter(function(room){return room.featured===true;});//getting max size and price from rooms object by Math.max method\nmaxPrice=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.price;})));maxSize=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.size;})));//setting state with new sorted data\n_this.setState({rooms:rooms,featuredRooms:featuredRooms,sortedRooms:rooms,loading:false,price:maxPrice,maxPrice:maxPrice,maxSize:maxSize});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));_this.getRoom=function(slug){var tempRooms=_toConsumableArray(_this.state.rooms);var room=tempRooms.find(function(room){return room.slug===slug;});return room;};_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=event.target.name;_this.setState(_defineProperty({},name,value),_this.filterRooms);//    apply handleChange to filterRooms\n};_this.filterRooms=function(){// destructuring state\nvar _this$state=_this.state,rooms=_this$state.rooms,type=_this$state.type,capacity=_this$state.capacity,price=_this$state.price,minSize=_this$state.minSize,maxSize=_this$state.maxSize,breakfast=_this$state.breakfast,pets=_this$state.pets;//all rooms\nvar tempRooms=_toConsumableArray(rooms);//transform value\ncapacity=parseInt(capacity);//FILTER BY TYPE\nif(type!=='all'){tempRooms=tempRooms.filter(function(room){return room.type===type;});}//FILTER BY CAPACITY\nif(capacity!==1){tempRooms=tempRooms.filter(function(room){return room.capacity>=capacity;});}//FILTER BY PRICE\nif(price!==0){tempRooms=tempRooms.filter(function(room){return room.price<=price;});}//FILTER BY SIZE\ntempRooms=tempRooms.filter(function(room){return room.size>=minSize&&room.size<=maxSize;});//FILTER BY BREAKFAST\nif(breakfast){tempRooms=tempRooms.filter(function(room){return room.breakfast===true;});}//FILTER BY PETS\nif(pets){tempRooms=tempRooms.filter(function(room){return room.pets===true;});}//set sortedRooms , change state\n_this.setState({sortedRooms:tempRooms});};return _this;}_createClass(RoomProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();//getting sorted data from function\n}//for formatting data, because we have complex data from contentful\n},{key:\"formatData\",value:function formatData(items){var tempItems=items.map(function(item){var id=item.sys.id;var images=item.fields.images.map(function(image){return image.fields.file.url;});var room=_objectSpread(_objectSpread({},item.fields),{},{id:id,images:images});return room;});return tempItems;}//function for getting room information from data by its slug\n},{key:\"render\",value:function render(){return/*#__PURE__*/ (//sending props to children using context\n_jsx(RoomContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{getRoom:this.getRoom,handleChange:this.handleChange}),children:this.props.children}));}}]);return RoomProvider;}(Component);/* A higher-order component (HOC) is an advanced technique in React for reusing component logic. HOCs are not part\r\n * of the React API, per se. They are a pattern that emerges from React’s compositional nature. Concretely, a\r\n * higher-order component is a function that takes a component and returns a new component. */var RoomConsumer=RoomContext.Consumer;// This function takes a component...\nexport function withRoomConsumer(Component){// ...and returns another component...\nreturn function ConsumerWrapper(props){return/*#__PURE__*/_jsx(RoomConsumer,{children:function children(value){return/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{context:value}));}});};}export{RoomProvider,RoomConsumer,RoomContext};","map":{"version":3,"names":["React","Component","items","Client","RoomContext","createContext","RoomProvider","state","rooms","sortedRooms","featuredRooms","loading","type","capacity","price","minPrice","maxPrice","minSize","maxSize","pets","breakfast","getData","getEntries","content_type","response","formatData","filter","room","featured","Math","max","map","item","size","setState","console","log","getRoom","slug","tempRooms","find","handleChange","event","target","value","checked","name","filterRooms","parseInt","tempItems","id","sys","images","fields","image","file","url","props","children","RoomConsumer","Consumer","withRoomConsumer","ConsumerWrapper"],"sources":["C:/Users/HP/Desktop/My Files/frontend files/beach-resort/src/context.js"],"sourcesContent":["import React, {Component} from 'react';\r\nimport items from './data'\r\nimport Client from './Contentful'\r\n\r\n\r\nconst RoomContext = React.createContext()\r\n\r\n// <RoomContext.Provider value={}\r\nclass RoomProvider extends Component {\r\n    state = {\r\n        rooms: [],\r\n        sortedRooms: [],\r\n        featuredRooms: [],\r\n        loading: true,\r\n        type: 'all',\r\n        capacity: 1,\r\n        price: 0,\r\n        minPrice: 0,\r\n        maxPrice: 0,\r\n        minSize: 0,\r\n        maxSize: 0,\r\n        pets: false,\r\n        breakfast: false\r\n\r\n    }\r\n\r\n    //getData {}\r\n    getData = async () => {\r\n        try {\r\n            let response = await Client.getEntries({\r\n                content_type: \"beachResort\"\r\n            })\r\n            let rooms = this.formatData(response.items)\r\n            //sorting rooms by featured state then adding this rooms to featuredRooms which was empty array\r\n            let featuredRooms = rooms.filter((room) => room.featured === true)\r\n            //getting max size and price from rooms object by Math.max method\r\n            let maxPrice = Math.max(...rooms.map((item) => item.price))\r\n            let maxSize = Math.max(...rooms.map((item) => item.size))\r\n\r\n            //setting state with new sorted data\r\n            this.setState({\r\n                rooms,\r\n                featuredRooms,\r\n                sortedRooms: rooms,\r\n                loading: false,\r\n                price: maxPrice,\r\n                maxPrice: maxPrice,\r\n                maxSize: maxSize\r\n            })\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getData()\r\n        //getting sorted data from function\r\n\r\n    }\r\n\r\n    //for formatting data, because we have complex data from contentful\r\n    formatData(items) {\r\n        let tempItems = items.map((item) => {\r\n            let id = item.sys.id\r\n            let images = item.fields.images.map((image) => image.fields.file.url)\r\n            let room = {...item.fields, id, images}\r\n            return room\r\n        })\r\n        return tempItems\r\n    }\r\n\r\n    //function for getting room information from data by its slug\r\n    getRoom = slug => {\r\n        let tempRooms = [...this.state.rooms]\r\n        const room = tempRooms.find(room => room.slug === slug)\r\n        return room\r\n\r\n    }\r\n\r\n    //getting values from form by event.target\r\n    handleChange = event => {\r\n        const target = event.target\r\n        const value = target.type === 'checkbox' ? target.checked : target.value\r\n        const name = event.target.name\r\n        this.setState({\r\n            [name]: value\r\n        }, this.filterRooms)\r\n        //    apply handleChange to filterRooms\r\n    }\r\n\r\n    //filtering Rooms\r\n    filterRooms = () => {\r\n        // destructuring state\r\n        let {\r\n            rooms, type, capacity, price, minSize, maxSize, breakfast, pets\r\n        } = this.state\r\n        //all rooms\r\n        let tempRooms = [...rooms]\r\n        //transform value\r\n        capacity = parseInt(capacity)\r\n\r\n\r\n        //FILTER BY TYPE\r\n        if (type !== 'all') {\r\n            tempRooms = tempRooms.filter(room => room.type === type)\r\n        }\r\n\r\n        //FILTER BY CAPACITY\r\n        if (capacity !== 1) {\r\n            tempRooms = tempRooms.filter(room => room.capacity >= capacity)\r\n        }\r\n\r\n        //FILTER BY PRICE\r\n        if (price !== 0) {\r\n            tempRooms = tempRooms.filter(room => room.price <= price)\r\n        }\r\n\r\n        //FILTER BY SIZE\r\n        tempRooms = tempRooms.filter(room => room.size >= minSize && room.size <= maxSize)\r\n\r\n        //FILTER BY BREAKFAST\r\n        if (breakfast) {\r\n            tempRooms = tempRooms.filter(room => room.breakfast === true)\r\n        }\r\n\r\n        //FILTER BY PETS\r\n        if (pets) {\r\n            tempRooms = tempRooms.filter(room => room.pets === true)\r\n        }\r\n        //set sortedRooms , change state\r\n        this.setState({\r\n            sortedRooms: tempRooms\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            //sending props to children using context\r\n            <RoomContext.Provider value={{\r\n                ...this.state,\r\n                getRoom: this.getRoom,\r\n                handleChange: this.handleChange\r\n            }}>\r\n                {this.props.children}\r\n            </RoomContext.Provider>\r\n\r\n        );\r\n    }\r\n}\r\n\r\n/* A higher-order component (HOC) is an advanced technique in React for reusing component logic. HOCs are not part\r\n * of the React API, per se. They are a pattern that emerges from React’s compositional nature. Concretely, a\r\n * higher-order component is a function that takes a component and returns a new component. */\r\n\r\nconst RoomConsumer = RoomContext.Consumer\r\n\r\n// This function takes a component...\r\nexport function withRoomConsumer(Component) {\r\n\r\n    // ...and returns another component...\r\n    return function ConsumerWrapper(props) {\r\n        return (\r\n            <RoomConsumer>\r\n                {value => <Component {...props} context={value}/>}\r\n            </RoomConsumer>\r\n        )\r\n    }\r\n}\r\n\r\nexport {RoomProvider, RoomConsumer, RoomContext}"],"mappings":"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"},"metadata":{},"sourceType":"module"}